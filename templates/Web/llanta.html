{% extends 'Web/base.html' %}
{% block blockCatalogos%}nav-item active{% endblock  %}
{% block collapseCatalogos %}collapse show{% endblock  %}
{% block llantas %}collapse-item active{% endblock  %}
{% load static %}
{% block content %}  
<style>
  input[type=checkbox] {
      transform: scale(2.5);
  }
</style>  
<div id="wrapper">
        <div class="container-fluid">
          <div class="card shadow mb-4">
            <div class="card-header py-3">
            	<div class="row">
                <h6 class="m-0 font-weight-bold text-primary"><i class="fa fa-edit"></i> 
                  {% if update %} Editar Llanta {% else %} Crear Llanta {% endif %}</h6>
            	</div>
            </div>
            <form method="post" action="" enctype="multipart/form-data" >
            {% csrf_token %}
            <div class="card-body">
              <div class="row">
              	<div class="col-lg-2">Seleccionar Vehiculo</div>
                <div class="col-lg-4">{{form.vehiculo}}</div>
              </div>
              <br>
              <div class="row">
              	<div class="col-lg-2">Marca de la Llanta</div>
                <div class="col-lg-4">{{form.marca}}</div>
                <div class="col-lg-2">Modelo de la Llanta</div>
                <div class="col-lg-4">{{form.modelo_llanta}}</div>
              </div>
              <br>
              <div class="row">
              	<div class="col-lg-2">Medida</div>
                <div class="col-lg-4">{{form.medida_llanta}}</div>
              </div>
              <br>
              <div class="row">
              	<div class="col-lg-2">Ubicaci√≥n {{form.ubicacion.value}}</div>
                <div class="col-lg-4">{{form.ubicacion}}</div>
                <div id="labelAlmacen" class="col-lg-2" {% if form.ubicacion.value == 1 %} style="display: block;" {% else %} style="display: none;" {% endif %}>Almacen</div>
                <div id="valueAlmacen" class="col-lg-4" {% if form.ubicacion.value == 1 %} style="display: block;" {% else %} style="display: none;" {% endif %}>{{form.almacen}}</div>
              </div>
              <br>
              <div class="row">
              	<div class="col-lg-2">Costo</div>
                <div class="col-lg-4">{{form.costo}}</div>
                <div class="col-lg-2">Km</div>
                <div class="col-lg-3">{{form.km}}</div>
              </div>
              <br>
              <div class="row">
              	<div class="col-lg-2">Estado</div>
                <div class="col-lg-4">{{form.estado}}</div>
              </div>
              <br>
              <div class="row">
              	<div class="col-lg-2">Observaciones</div>
                <div class="col-lg-10">{{form.obs}}</div>
              </div>
         
			
            </div>
            <div class="card-header py-3">
              <div class="row">
                <div class="col-lg-6"> <h6 class="m-0 font-weight-bold text-primary"><i class="fa fa-edit"></i> 
                  Informacion de la cubierta actual</h6></div>
                <div class="col-lg-6"><button id="openModal" class="btn btn-primary"><i class="fa fa-plus" aria-hidden="true"></i>Agregar</button></div>
               
            	</div>
            </div>
          	</form>
            <form method="post" action="" enctype="multipart/form-data" >
              {% csrf_token %}
              <div class="card-body">
                <div class="row">
                  <div class="col-lg-2">Seleccionar Vehiculo</div>
                  <div class="col-lg-4">{{form.vehiculo}}</div>
                </div>
                <br>
          
            
           
        
              </div>
              <div class="card-footer text-muted">
                  <button type="submit" class="btn btn-primary">Grabar</button>
                  <a href="{% url 'Web:llantas' %}" class="btn btn-secondary">Cancelar</a>
              </div>
              </form>
          </div>				
        </div>
</div>

{% endblock %}
{% block bottom_scripts %}

<script type="text/javascript" charset="utf-8">
$('#id_marca  option[value="{{instance.modelo_llanta.marca_llanta.pk}}"]').prop("selected", true);
function actualizar_modelo(){
    $('#id_modelo_llanta').empty();
    $('#id_modelo_llanta').append($("<option>", {value: "",text: " --------- "}));              
    $.ajax({
      'url' : '/render-option-llanta',
      'type' : 'GET',
      'async': false,
      'data' : {'id_marca' : $('#id_marca').val()},
      'success' : function(data) {
       $.each(data, function( index, valuex ) {
          $('#id_modelo_llanta').append($("<option>", {value: valuex.id ,text: valuex.descripcion}));              
       });
      },
      'error' : function(request,error){
        //alert("Request: "+JSON.stringify(request));
      }
    });
}
$('#id_ubicacion').change(function() {
      //alert($(this).val());
      if( $(this).val()==1 ){
        $('#labelAlmacen').show();
        $('#valueAlmacen').show();
      }else{
        $('#labelAlmacen').hide();
        $('#valueAlmacen').hide();
      }
    });
    $("#openModal").on("click", function () {
      $.confirm({
    title: 'Prompt!',
    content: '' +
    '<form action="" class="formName">' +
    '<div class="form-group">' +
    '<label>Enter something here</label>' +
    '<input type="text" placeholder="Your name" class="name form-control" required />' +
    '</div>' +
    '</form>',
    buttons: {
        formSubmit: {
            text: 'Submit',
            btnClass: 'btn-blue',
            action: function () {
                var name = this.$content.find('.name').val();
                if(!name){
                    $.alert('provide a valid name');
                    return false;
                }
                $.alert('Your name is ' + name);
            }
        },
        cancel: function () {
            //close
        },
    },
    onContentReady: function () {
        // bind to events
        var jc = this;
        this.$content.find('form').on('submit', function (e) {
            // if the user submits the form by pressing enter in the field.
            e.preventDefault();
            jc.$$formSubmit.trigger('click'); // reference the button and click it
        });
    }
});
    });
</script>
{% endblock %}
